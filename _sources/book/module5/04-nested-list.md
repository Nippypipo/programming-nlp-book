# Nested data structure
ภาษาไพธอนรองรับการเก็บข้อมูลอยู่สองประเภทใหญ่ ๆ ที่เราได้เรียนมาแล้ว

1. ข้อมูลแบบค่าเดี่ยว ได้แก่ integer string float boolean
2. ข้อมูลแบบคอลเลกชัน ได้แก่ list tuple dictionary set เราเรียกข้อมูลประเภทนี้ว่า โครงสร้างข้อมูล  โครงสร้างข้อมูลมีหน้าที่ในการเก็บข้อมูลเอาไว้หลาย ๆ ตัว ทำให้เกิดโครงสร้าง เช่น ลิสต์เป็นโครงสร้างมีลำดับ ดิกชันนารีเป็นโครงสร้างแบบมีการจับคู่ ในบทที่ผ่านมาเราได้เรียนรู้วิธีการใช้โครงสร้างข้อมูลเหล่านี้ในการเก็บข้อมูลแบบค่าเดี่ยวหลาย ๆ ตัวไว้ในโครงสร้างเดียวกัน เช่น ลิสต์ของตัวเลขเพื่อใช้เก็บรายการคะแนนของนักเรียนในห้อง ลิสต์ของสตริงเพื่อใช้เก็บรายชื่อของพนักงานในบริษัท ดิกชันนารีที่คีย์เป็นสตริงและแวลูเป็นตัวเลขเพื่อใช้เก็บคำและความถี่เกิดขึ้นของตคำนั้น เซ็ตของสตริงเพื่อใช้เก็บ vocabulary เป็นต้น

![basic data structures](img/data-structures.svg)

โครงสร้างข้อมูลที่ซ้อนกัน (nested data structure) คือ โครงสร้างข้อมูลที่เก็บโครงสร้างข้อมูลอีกประเภทนึงเอาไว้  โครงสร้างข้อมูลทั้งหมดที่เราได้เรียนมาแล้วสามารถเก็บโครงสร้างข้อมูลอื่น ๆ ซ้อนเข้าไปได้อีกชั้นหนึ่ง เพื่อรองรับข้อมูลที่มีโครงสร้างซับซ้อนขึ้น เช่น

- ลิสต์ของลิสต์ของสตริง เพื่อใช้เก็บชื่อไฟล์และโฟลเดอร์ที่อยู่ในโฟลเดอร์อีกชั้นหนึ่ง
```python
files = [
    ['file1.txt', 'file2.txt', 'file3.txt'],
    ['file4.txt', 'file5.txt', 'file6.txt'],
    ['file7.txt', 'file8.txt']
]
```
- ลิสต์ของทูเปิลของสตริง เพื่อใช้เก็บรายชื่อที่มีทั้งชื่อจริงและชื่อเล่น
```python
names = [
    ('เศรษฐา', 'นิด'),
    ('ประยุทธ์', 'ตู่'),
    ('ยิ่งลักษณ์', 'ปู'),
    ('อภิสิทธิ์', 'มาร์ค')
]
```
- ลิสต์ของดิกชันนารี เพื่อใช้เก็บบทสนทนาในกลุ่มไลน์
```python
tweets = [
    {'user': 'nong-p1', 'message': 'พี่คะ โปรแกรมหนู error ค่ะ'},
    {'user': 'nipun', 'message': 'ขอดูหน่อยครับ'},
    {'user': 'nipun', 'message': 'ส่ง screenshot มาเลยครับ'},
    {'user': 'p-p2', 'message': 'ปัญหาเดียวกันเลยครับ'}
]
```

ความท้าทายของการใช้โครงสร้างข้อมูลที่ซ้อนกัน คือ  การเข้าถึงข้อมูลในโครงสร้างข้อมูลที่ถูกซ้อนอยู่ ผู้ใช้จะต้องทราบว่าเมื่อเข้าถึงข้อมูลโดยใช้ `[]` แล้วค่าทีได้คืนมาเป็นโครงสร้างข้อมูลประเภทใด และโครงสร้างข้อมูลนั้นเก็บข้อมูลประเภทใดอีก ในบทนี้จะมีคำถามให้ลองคิดตามดูว่าเพื่อรันโค้ดแล้วจะได้โครงสร้างข้อมูลประเภทใดคืนมา 

ความท้าทายอีกประการหนึ่งของการใช้โครงสร้างข้อมูลที่ซ้อนกัน คือ การเลือกใช้โครงสร้างข้อมูลที่เหมาะสมกับข้อมูลที่ต้องการจะเก็บ และไม่ซับซ้อนเกินไป หากเราเลือกโครงสร้างข้อมูลที่ซับซ้อนเกินไป จะทำให้โค้ดทำความเข้าใจได้ยาก เมื่อผู้อื่นต้องนำโค้ดเราไปเขียนเพ่ิมเติม ทำให้เกิดความผิดพลาดได้ง่าย  

ในบทนี้เราจะพูดถึงโครงสร้างข้อมูลที่ซ้อนกัน ที่พบเห็นได้บ่อย ๆ ในการเขียนโค้ดเพื่อประมวลผลข้อมูล 

## ลิสต์ของลิสต์
ลิสต์ของลิสต์มักจะใช้เก็บประโยคหลาย ๆ ประโยค เราจะเก็บประโยค 1 ประโยคไว้ในลิสต์ของสตริงคำ เมื่อเราต้องเก็บหลาย ๆ ประโยคจึงกลายมาเป็นลิสต์ของลิสต์ของสตริงคำ 
```python
[['I', 'want', 'you'], ['I', 'need', 'you'], ['I', 'love', 'you']]
```
ถ้าหากเรามีข้อมูลเป็นลิสต์ของสตริงที่เป็นประโยคภาษาอังกฤษ เราสามารถเปลี่ยนให้เป็นลิสต์ของลิสต์ของคำได้ดังนี้ 
```python
sentences = [
    'I want you',
    'I need you',
    'I love you'
]
words = [sentence.split() for sentence in sentences]
```
ในคำสั่งที่ใช้ list comprehension ในตัวอย่างโค้ดข้างต้น `sentence`  เป็นสตริง เราจึงสามารถใช้ `.split` ในการเปลี่ยนให้สตริง เป็นลิสต์ของคำโดยใช้ช่องว่างเป็นตัวแยก ผลลัพธ์ที่ได้คือ 
```python
[['I', 'want', 'you'], ['I', 'need', 'you'], ['I', 'love', 'you']]
```
ซึ่งเป็นลิสต์ของลิสต์ของสตริง

### คำถามชวนคิด
สมมติว่าเรามีข้อมูลต่อไปนี้
```python
list_sen = [['แซม','ซื้อ','tv','ใหม่'],['android', 'ไม่', 'ได้','ถูก', 'กว่า', 'iphone']]
list_lang = [['th','th','en','th'],['en', 'th', 'th','th', 'th', 'en']]
list_lang2 = [[False, False, True, False], [True, False, False, False, False, True]]
list_len = [[3, 4, 2, 4], [7, 3, 3, 3, 4, 6]]
```
คำสั่งต่อไปนี้คืนค่าเป็นอะไร ซึ่งจัดเป็นข้อมูลประเภทใด
1. `list_sen[0]`
2. `list_lang[1][0]`
3. `list_lang2[1][2]`
4. `list_len[0][3]`

#### เฉลย
| คำสั่ง | คืนค่า | ประเภทข้อมูล | คำอธิบาย |
|:--------|:--------|:---------------|:---------|
| `list_sen[0]` | `['แซม','ซื้อ','tv','ใหม่']` | ลิสต์ของสตริง | `[0]`เข้าถึงข้อมูลในลิสต์ของลิสต์ของสตริง (`list_sen`) จึงแกะลิสต์ออกหนึ่งชั้น ได้~~ลิสต์ของ~~ลิสต์ของสตริง |
| `list_lang[1][0]` | `'en'` | สตริง | `[1]`เข้าถึงข้อมูลในลิสต์ของลิสต์ของสตริง (`list_lang`)จึงแกะลิสต์ออกหนึ่งชั้น ได้~~ลิสต์ของ~~ลิสต์ของสตริง จากนั้น `[0]` เข้าถึงสตริงในลิสต์ของสตริง ได้สตริง |
| `list_lang2[1][2]` | `False` | บูลีน | `[1]`เข้าถึงข้อมูลในลิสต์ของลิสต์ของบูลีน (`list_lang2`) จึงแกะลิสต์ออกหนึ่งชั้น ได้~~ลิสต์ของ~~ลิสต์ของบูลีน จากนั้น `[2]` เข้าถึงบูลีนในลิสต์ของบูลีน ได้บูลีน |
| `list_len[0][3]` | `4` | จำนวนเต็ม | `[0]`เข้าถึงข้อมูลในลิสต์ของลิสต์ของจำนวนเต็ม (`list_len`) จึงแกะลิสต์ออกหนึ่งชั้น ได้~~ลิสต์ของ~~ลิสต์ของจำนวนเต็ม จากนั้น `[3]` เข้าถึงจำนวนเต็มในลิสต์ของจำนวนเต็ม ได้จำนวนเต็ม |
